<% page = random %>

<div class="content">

  <div class="article">

    <div class="topic">
      <%= page.css('h1.firstHeading').text %>
      <button>
        remove
      </button>
    </div>

    <br /><br />
    <% summary = '' %>
    <% page.css('div#mw-content-text p').each do |p| %>
      <% summary << p.text.gsub(/\[\d+\]/,' ') %>
    <% end %>
    <% article = OTS.parse(summary) %>

    <% article.summarize(sentences: 3).each do |s| %>
      <%= s[:sentence] %>
      <br /><br />
    <% end %>

  </div>

  <button>
    Article+
  </button>
</div>

<script>
  $(function(){
    $('.article').each(function(){
      var that = this;
      $(that).children('.topic').children('button').click(function(){
        that.remove();
      })
    })
  })
</script>


